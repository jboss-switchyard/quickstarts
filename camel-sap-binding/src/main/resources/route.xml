<?xml version="1.0" encoding="ASCII"?>
<routes xmlns="http://camel.apache.org/schema/spring">
    <route>
        <from uri="switchyard://FlightBookingService"/>
<!--
        <unmarshal>
            <jaxb contextPath="org.switchyard.quickstarts.camel.sap.binding.jaxb" prettyPrint="true"/>
        </unmarshal>
-->
        <multicast strategyRef="aggregateFlightBookingStrategy" stopOnException="true">
            <to uri="direct:getFlightConnectionInfo"/>
            <to uri="direct:getFlightCustomerInfo"/>
            <to uri="direct:getPassengerInfo"/>
        </multicast>
        <to uri="direct:createFlightTrip"/>
<!--
        <marshal>
            <jaxb contextPath="org.switchyard.quickstarts.camel.sap.binding.jaxb" prettyPrint="true"/>
        </marshal>
-->
    </route>
    <route>
        <from uri="direct:getFlightConnectionInfo"/>
        <to uri="bean:createFlightConnectionGetListRequest"/>
        <to uri="switchyard://GetFlightConnectionListService"/>
        <to uri="bean:createFlightConnectionGetDetailRequest"/>
        <to uri="switchyard://GetFlightConnectionDetailService"/>
        <to uri="bean:returnFlightConnectionInfo"/>
    </route>
    <route>
        <from uri="direct:getFlightCustomerInfo"/>
        <to uri="bean:createFlightCustomerGetListRequest"/>
        <to uri="switchyard://GetFlightCustomerListService"/>
        <to uri="bean:returnFlightCustomerInfo"/>
    </route>
    <route>
        <from uri="direct:getPassengerInfo"/>
        <to uri="bean:returnPassengerInfo"/>
    </route>
    <route>
        <from uri="direct:createFlightTrip"/>
        <to uri="bean:createFlightTripRequest"/>
        <to uri="switchyard://CreateFlightTripService"/>
        <to uri="bean:returnFlightTripResponse"/>
    </route>
</routes>
